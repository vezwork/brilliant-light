(()=>{"use strict";var t,n,e=function(t,n){return[t[0]+n[0],t[1]+n[1]]},i=function(t,n){return[t[0]-n[0],t[1]-n[1]]},o=function(t,n){return[t*n[0],t*n[1]]},r=function(t,n){return t[0]*n[0]+t[1]*n[1]},a=function(t){return Math.sqrt(r(t,t))},l=function(t){return Math.atan2(t[1],t[0])},u=function(t,n){return l(i(n,t))},g=function(t,n){return a(i(t,n))},c=function(t){return[Math.cos(t),Math.sin(t)]},d=function(t,n){return v(n-t+Math.PI,2*Math.PI)-Math.PI},v=function(t,n){return t-Math.floor(t/n)*n},s=function(t,n,e){if(e||2===arguments.length)for(var i,o=0,r=n.length;o<r;o++)!i&&o in n||(i||(i=Array.prototype.slice.call(n,0,o)),i[o]=n[o]);return t.concat(i||Array.prototype.slice.call(n))},f=document.getElementById("main_canvas"),h=f.getContext("2d"),m=document.getElementById("eye_img"),p=document.getElementById("handle_img"),y=document.getElementById("lightbulb_img"),M=document.getElementById("lightbulb_dance1_img"),b=document.getElementById("lightbulb_dance2_img"),I=function(t,n){return{tip:t,angle:n,trail:[[t,t]],isMoving:!0}},A=[450,400],E=-Math.PI/2,_=[450,100],B=!1,L=[[[350,100],[350,340]],[[550,100],[550,340]]],P=[0,0],k=!1;f.addEventListener("mousedown",(function(t){k=!0})),f.addEventListener("mouseup",(function(t){k=!1})),f.addEventListener("mouseleave",(function(t){k=!1})),f.addEventListener("mousemove",(function(t){P=[t.offsetX,t.offsetY]}));var w=function(t){var n=t.tip,i=t.angle,r=t.trail,a=t.isMoving;return r[r.length-1][1]=n,{tip:e(n,o(3,c(i))),angle:i,trail:r,isMoving:a}},q=function(t,n){var i=c(n);return e(t,o(40,i))},D=0,F=!1,x=function(t,n,e,r){void 0===r&&(r=1);var l,u=[n.width,n.height],g=o(r,o(1/a(l=u),l));t.drawImage.apply(t,s(s([n],i(e,o(.5,g)),!1),g,!1))},S=1;requestAnimationFrame((function c(){requestAnimationFrame(c),function(){if(g(q(A,E),P)<40?(document.body.style.cursor="grab",k&&(document.body.style.cursor="grabbing",F=!0)):document.body.style.cursor="default",k&&F&&(E=l(i(P,A))),!k&&F&&(t=I(A,E),n=I(A,E),B=!1,F=!1),(null==n?void 0:n.isMoving)&&(n=w(n)),null==t?void 0:t.isMoving){t=w(t);for(var c=0,v=L;c<v.length;c++){var s=v[c];if(a((h=t.tip,p=void 0,y=void 0,M=void 0,b=void 0,D=void 0,x=void 0,p=(m=s)[0],y=m[1],M=i(h,p),b=i(y,p),D=r(b,b),x=function(t,n){var r=t[0];return e(r,o(n,i(t[1],r)))}([p,y],0===D?-1:Math.max(0,Math.min(1,r(M,b)/D))),i(h,x)))<12){var f=u.apply(void 0,s);t.angle=(S=t.angle,(T=f)+d(S,T)),t.trail.push([t.tip,t.tip])}}g.apply(void 0,t.trail[t.trail.length-1])>300&&(t.isMoving=!1,n.isMoving=!1),g(t.tip,_)<24&&(t.isMoving=!1,n.isMoving=!1,t.trail.length-1>0&&(B=!0))}var h,m,p,y,M,b,D,x,S,T}(),function(){h.clearRect(0,0,f.width,f.height),x(h,m,A,64);for(var o=0,r=L;o<r.length;o++)T(h,r[o],12);if(B){var a,l=(t.trail.length-1)%2==1;a=e(n.tip,l?[t.tip[0]-_[0],_[1]-t.tip[1]]:i(_,t.tip)),D%110>60?(h.globalAlpha=.5,x(h,l?M:b,a,145),h.globalAlpha=1,x(h,b,_,145)):(h.globalAlpha=.5,x(h,l?b:M,a,145),h.globalAlpha=1,x(h,M,_,145))}else x(h,y,_,64);if(h.strokeStyle="#F3D015",t)for(var u=0,g=t.trail;u<g.length;u++){var c=g[u];T(h,c,5)}if(h.setLineDash([5,5]),n)for(var d=0,v=n.trail;d<v.length;d++)c=v[d],T(h,c,5);h.setLineDash([]),h.strokeStyle="black",(null==t?void 0:t.isMoving)?S-=(S-.2)/20:S-=(S-1)/20,h.globalAlpha=S,x(h,p,q(A,E),80),h.globalAlpha=1}(),D++}));var T=function(t,n,e){var i=n[0],o=n[1];void 0===e&&(e=1),t.lineWidth=e,t.beginPath(),t.moveTo.apply(t,i),t.lineTo.apply(t,o),t.stroke()}})();